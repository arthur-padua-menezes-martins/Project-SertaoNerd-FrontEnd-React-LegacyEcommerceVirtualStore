/*basic modules************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
import React, { useState, useEffect } from 'react'

/*redux************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
import { connect } from 'react-redux'
import actions from '../redux/actions/index.js'

/*containers************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
import Layout from '../Components/Layout/index.js'
import Header from '../Containers/Header/index.js'
import CartPage from '../Containers/CartPage/index.js'

/*main function************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
function Cart(props) {

    if (typeof window !== 'undefined') {

        /*state************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
        var [InitialInnerWidth, setInitialInnerWidth] = useState(window.innerWidth)




        /*hooks************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
        useEffect(() => { props.verifyAuthentication() }, [])



        if (props.login.authentication.authenticated !== null) {
            if (props.login.authentication.authenticated === true) {


                /*return desktop************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
                if (window.innerWidth > 720) {

                    return (
                        <Layout backgroundColor={'#f5f5f5'}>

                            <Header
                                InitialInnerWidth={InitialInnerWidth}
                                setInitialInnerWidth={setInitialInnerWidth}
                                Desktop={true}
                                Mobile={false}
                                Default={false}
                                Simple={true} />

                            <CartPage />

                        </Layout>
                    )
                }


                /*return mobile************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
                if (window.innerWidth <= 720) {

                    return (
                        <Layout backgroundColor={'#f5f5f5'}>

                            <Header
                                InitialInnerWidth={InitialInnerWidth}
                                setInitialInnerWidth={setInitialInnerWidth}
                                Desktop={false}
                                Mobile={true}
                                Default={true} />

                            <CartPage />

                        </Layout>
                    )
                }


            } else { window.location.href = '/login?authenticated=false' }
        } else { return (<></>) }
    } else { return (<></>) }

}

const mapStateToProps = (state, ownProps) => ({ ...state, ownProps })
export default connect(mapStateToProps, actions)(Cart)