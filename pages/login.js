/*basic modules************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
import React, { useState, useEffect } from 'react'

/*components************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
import Layout from '../Components/Layout/index.js'

/*redux************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
import { connect } from 'react-redux'
import actions from '../redux/actions/index.js'

/*containers************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
import Header from '../Containers/Header/index.js'
import LoginPage from '../Containers/LoginPage/index.js'

/*main function************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
const Login = props => {

    if (typeof window !== 'undefined') {

        /*state************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
        var [InitialInnerWidth, setInitialInnerWidth] = useState(window.innerWidth)



        
        /*hooks************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
        useEffect(() => { props.verifyAuthentication() }, [])




        if (window.innerWidth > 720) {
            return (
                <Layout>

                    <Header
                        InitialInnerWidth={InitialInnerWidth}
                        setInitialInnerWidth={setInitialInnerWidth}
                        Desktop={true}
                        Mobile={false}
                        Default={true} />

                    <LoginPage query={props.query} />

                </Layout>
            )
        }

        if (window.innerWidth <= 720) {
            return (
                <Layout>

                    <Header
                        InitialInnerWidth={InitialInnerWidth}
                        setInitialInnerWidth={setInitialInnerWidth}
                        Desktop={false}
                        Mobile={true}
                        Default={true} />

                    <LoginPage query={props.query} />

                </Layout>
            )
        }

    }

    else {
        return (
            <></>
        )
    }
}

Login.getInitialProps = async ctx => {

    return {
        query: ctx.query
    }

}

const mapStateToProps = (state, ownProps) => ({ ...state, ownProps })
export default connect(mapStateToProps, actions)(Login)