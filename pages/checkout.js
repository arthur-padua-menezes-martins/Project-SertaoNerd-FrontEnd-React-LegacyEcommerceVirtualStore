/*basic modules************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
import React, { useState, useEffect } from 'react'

/*redux************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
import { connect } from 'react-redux'
import actions from '../redux/actions/index.js'

/*Components************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
import Layout from '../Components/Layout/index.js'

/*Containers************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
import Header from '../Containers/Header/index.js'
import CheckoutPage from '../Containers/CheckoutPage/index.js'

/*main function************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
const Checkout = (props) => {

    if (typeof window !== 'undefined') {

        /*state************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
        var [InitialInnerWidth, setInitialInnerWidth] = useState(window.innerWidth)




        /*hooks************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
        useEffect(() => { props.verifyAuthentication('true') }, [])




        if (props.login.authentication.authenticated !== null) {
            if (props.login.authentication.authenticated === true) {


                if (window.innerWidth >= 720) {

                    return (
                        <Layout pagSeguro>

                            <Header
                                InitialInnerWidth={InitialInnerWidth}
                                setInitialInnerWidth={setInitialInnerWidth}
                                Desktop={true}
                                Mobile={false}
                                Default={false}
                                Simple={true} />

                            <CheckoutPage />

                        </Layout>
                    )
                }

                if (window.innerWidth < 720) {

                    return (
                        <Layout pagSeguro>

                            <Header
                                InitialInnerWidth={InitialInnerWidth}
                                setInitialInnerWidth={setInitialInnerWidth}
                                Desktop={false}
                                Mobile={true}
                                Default={true} />

                            <CheckoutPage />

                        </Layout>
                    )
                }


            } else { window.location.href = '/login?authenticated=false' }
        } else { return (<></>) }
    } else { return (<></>) }

}

const mapStateToProps = state => ({ ...state })
export default connect(mapStateToProps, actions)(Checkout)